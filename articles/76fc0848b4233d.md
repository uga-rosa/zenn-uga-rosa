---
title: "Neovimç”¨ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½œã£ãŸè©±"
emoji: "ğŸ“Ÿ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Neovim"]
published: true
published_at: 2023-04-24 07:00
---

# ã¯ã˜ã‚ã«

ã“ã‚Œã¯ [Vimé§…ä¼](https://vim-jp.org/ekiden/) 4/24ã®è¨˜äº‹ã§ã™ã€‚

è‡ªä½œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å®£ä¼è¨˜äº‹ã«ãªã‚Šã¾ã™ã€‚

https://github.com/uga-rosa/ugaterm.nvim

# ã“ã‚Œã¯ãªã«

Neovim å°‚ç”¨ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚
ã„ãã¤ã‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’æä¾›ã—ã¾ã™ã€‚

- æ“ä½œãƒ‡ãƒ¢
![demo](https://user-images.githubusercontent.com/82267684/232364367-afd26d92-82e9-4f17-8604-560d9bf03824.gif)

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»è¨­å®š

Lua è£½ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ãŒã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã ã‘ã§ä½¿ãˆã¾ã™ã€‚

`setup()` ã¯è¨­å®šã‚’å¤‰æ›´ã—ãŸã„å ´åˆã«ä½¿ã£ã¦ãã ã•ã„ã€‚

```lua
require("ugaterm").setup({
  ---@type string The terminal buffer name prefix.
  prefix = "terminal://",
  ---@type string The filetype for a terminal buffer.
  filetype = "ugaterm",
  ---@type string|function The command/function to open a teminal window.
  open_cmd = "botright 15sp",
  -- Example of opening in a floating window.
  --
  -- open_cmd = function()
  --   local height = vim.api.nvim_get_option("lines")
  --   local width = vim.api.nvim_get_option("columns")
  --   vim.api.nvim_open_win(0, true, {
  --     relative = "editor",
  --     row = math.floor(height * 0.1),
  --     col = math.floor(width * 0.1),
  --     height = math.floor(height * 0.8),
  --     width = math.floor(width * 0.8),
  --   })
  -- end,
})
```

- prefix
  - ã“ã‚Œã«ç•ªå·ã‚’ä»˜ã‘ãŸã‚‚ã®ãŒ terminal buffer åã«ãªã‚Šã¾ã™ï¼ˆ`terminal://1`, `terminal://2`, etc.ï¼‰ã€‚
- filetype
  - terminal buffer ã«è¨­å®šã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã§ã™ã€‚
- open_cmd
  - terminal window ã‚’é–‹ããŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚æ–‡å­—åˆ— or Lua é–¢æ•°ã‚’å—ã‘ä»˜ã‘ã¾ã™ã€‚
  - æ–‡å­—åˆ—ã¯ EX ã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦è§£é‡ˆã•ã‚Œã¾ã™ï¼ˆ`vim.cmd()`ã«æ¸¡ã•ã‚Œã¾ã™ï¼‰ã€‚
  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯åˆ†å‰²ã§ã™ï¼ˆä¸‹ã€15è¡Œï¼‰ã€‚IDE ã½ã„ã§ã™ã­ã€‚

# ä½¿ã„æ–¹

EX ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ terminal ã‚’æ“ä½œã—ã¾ã™ã€‚
`:UgatermToggle`, `:UgatermNew`, `:UgatermSelect` ã‚ãŸã‚ŠãŒã‚ˆãä½¿ã†ã¨æ€ã†ã®ã§ã€ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹ãªã‚‰ã“ã‚Œã‚‰ã‹ãªã¨æ€ã„ã¾ã™ã€‚

å¢—ãˆã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚‹ã®ã§ã€ä½¿ã†éš›ã«ã¯ä¸€å¿œ [doc](https://github.com/uga-rosa/ugaterm.nvim/blob/main/doc/ugaterm.txt) ã‚‚è¦‹ã¦ãã ã•ã„ã€‚

- `:UgatermOpen`
	- terminal window ã‚’é–‹ãã¾ã™ã€‚
  - æœ€è¿‘ä½¿ç”¨ã—ãŸï¼ˆMost Recently Usedï¼‰ terminal buffer ãŒé¸ã°ã‚Œã¾ã™ã€‚
  - terminal buffer ãŒä¸€ã¤ã‚‚ãªã„å ´åˆã¯ `:UgatermNew` ãŒå‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚

- `:UgatermNew`
	- æ–°è¦ã§ terminal buffer ã‚’é–‹ãã¾ã™ã€‚
	- terminal window ã¯ã€é–‹ã„ã¦ã„ãªã‘ã‚Œã°é–‹ãã¾ã™ã€‚

- `:UgatermHide`
	- terminal window ã‚’é–‰ã˜ã¾ã™ã€‚

- `:UgatermToggle`
  - `:UgatermOpen` ã¨ `:UgatermHide` ã‚’ãƒˆã‚°ãƒ«ã—ã¾ã™ã€‚

- `:UgatermSelect`
	- `vim.ui.select()` ã‚’ä½¿ç”¨ã—ã¦ terminal buffer ã‚’é¸æŠã—ã¾ã™ã€‚

- `:UgatermDelete`
	- ç¾åœ¨é–‹ã„ã¦ã„ã‚‹ terminal buffer ã‚’å‰Šé™¤ã—ã¾ã™ã€‚
	- ä»–ã« terminal buffer ãŒã‚ã‚‹å ´åˆã¯ terminal windows ã¯ç¶­æŒã•ã‚Œã€æ¬¡ã® buffer ã‚’é–‹ãã¾ã™ã€‚
	- ãã® buffer ãŒæœ€å¾Œã®å ´åˆã¯ã€window ã‚‚é–‰ã˜ã¾ã™ã€‚

- `:UgatermRename [{newname}]`
	- ç¾åœ¨ã® terminal buffer ã®åå‰ã‚’å¤‰æ›´ã—ã¾ã™ã€‚
	- `{newname}` ã‚’çœç•¥ã—ãŸå ´åˆã¯ `vim.ui.input()` ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

# æœ€å¾Œã«

ã¨ã¦ã‚‚å¤šæ©Ÿèƒ½ã ã£ãŸã‚Šç‰¹åˆ¥ãªæ©Ÿèƒ½ãŒã‚ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€å®Ÿè£…ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ã—ã¦ãŠã‚Šãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã¯é«˜ã„ã§ã™ã€‚
è¿‘å¹´ã® Neovim plugin ç•Œéšˆã¯æµè¡Œã‚Šå»ƒã‚ŠãŒéå¸¸ã«æ¿€ã—ã„ãŸã‚ã€è‡ªä½œã—ã¦è‡ªåˆ†ã§ãƒ¡ãƒ³ãƒ†ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚
è‰¯ã‘ã‚Œã°ä½¿ã£ã¦ã¿ã¦ãã ã•ã„ã€‚
