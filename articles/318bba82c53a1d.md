---
title: "fzf-lua ã¯çµæ§‹ã‚«ã‚¹ã‚¿ãƒ ã§ãã‚‹ã‚ˆã£ã¦è©±"
emoji: "ğŸˆ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Neovim", "fzf", "Lua"]
published: true
---

# ã¯ã˜ã‚ã«

fzf-lua ã¯ Neovim ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã€ã„ã‚ã‚†ã‚‹ FF (Fuzzy Finder) ã®ä¸€ç¨®ã§ã™ã€‚
ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ fzf ã‚’ä½¿ã†ã®ãŒç‰¹å¾´ã§ã€éåŒæœŸé€šä¿¡å‘¨ã‚ŠãŒã‹ãªã‚Šä½œã‚Šè¾¼ã¾ã‚ŒãŸä¸€å“ã§ã™ã€‚
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å¤šãã®ã‚½ãƒ¼ã‚¹ã‚’å‚™ãˆãŸ all-in-one ç³»ã§ã‚ã‚Šã€å°å…¥ã™ã‚Œã°ã™ãã«ä½¿ã„å§‹ã‚ã‚‰ã‚Œã¾ã™ã€‚

https://github.com/ibhagwan/fzf-lua

ã¾ãŸæ‹¡å¼µæ€§ã«å„ªã‚ŒãŸè¨­è¨ˆã‚’ã—ã¦ãŠã‚Šã€è‡ªåˆ†ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«åˆã‚ã›ã¦æ§˜ã€…ãªæ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ä»Šå›ã¯ã“ã®æ‹¡å¼µæ€§ã«ç„¦ç‚¹ã‚’å½“ã¦ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

æœ¬è¨˜äº‹ã§ã¯ã€ã“ã¡ã‚‰[^1]ã®å…¬å¼ Wiki ã‚’å‚è€ƒã«ã€fzf-lua ã®æ‹¡å¼µæ©Ÿèƒ½ã®ä½œã‚Šæ–¹ã‚’ç°¡å˜ã«èª¬æ˜ã—ã¾ã™ã€‚
ã•ã‚‰ã«ã€ç§ãŒå®Ÿéš›ã«åˆ©ç”¨ã—ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’ã„ãã¤ã‹ã”ç´¹ä»‹ã—ã¾ã™ã€‚

# API

`fzf_exec` ã¨ `fzf_live` ã¨ã„ã† 2 ã¤ã®å…¬é–‹ API ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

```lua
local fzf_lua = require("fzf-lua")
fzf_lua.fzf_exec(...)
fzf_lua.fzf_live(...)
```

## å‰æçŸ¥è­˜

fzf-lua ã¯ cli ã® fzf ã‚’åˆ©ç”¨ã—ã¦çµã‚Šè¾¼ã¿ã‚’è¡Œã„ã¾ã™ã€‚
ãã®ãŸã‚ã€å„å€™è£œ (entry) ã¯å…¨ã¦å˜ãªã‚‹æ–‡å­—åˆ—ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ (æ•°å€¤ã¯æ–‡å­—åˆ—ã«å¤‰æ›ã§ãã‚‹ã®ã§ã‚»ãƒ¼ãƒ•)ã€‚
æ¨™æº–å…¥åŠ›ã«æµã—ã¾ã™ã‹ã‚‰ã­ã€‚
è‰²ä»˜ã‘ã‚‚ ANSI escape code ã§å®Ÿç¾ã—ã¦ãŠã‚Šã€å®Ÿä½“ã¯1ã¤ã®æ–‡å­—åˆ—ãªã®ã§ã™ã€‚
(ç‰¹ã«ä»–ã® FF ã®å†…éƒ¨å®Ÿè£…ã‚’çŸ¥ã£ã¦ã„ã‚‹æ–¹ã¯) ã“ã‚Œã‚’æŠŠæ¡ã—ã¦ãŠãã¨ã€ã“ã®å¾Œã®èª¬æ˜ãŒã‚¹ãƒ ãƒ¼ã‚ºã«ç†è§£ã§ãã‚‹ã§ã—ã‚‡ã†ã€‚

## fzf_exec()

å¤§æŠµã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«ã¯ `fzf_exec` ã‚’ä½¿ã„ã¾ã™ã€‚
ãªã«ã‹ã—ã‚‰ã®å€™è£œã‚’æ¸¡ã—ã¦ fzf ã§çµã‚Šè¾¼ã‚€ã€ã¨ã„ã†æ“ä½œå…¨èˆ¬ã‚’å®Ÿç¾ã§ãã¾ã™ã€‚

ã“ã®ã€Œå¤§æŠµã€ã«å«ã¾ã‚Œãªã„ã®ã¯ã€live grep ãªã©ã® query ã«å¿œã˜ã¦å‹•çš„ã«å€™è£œãŒå¤‰ã‚ã‚‹ã‚‚ã®ã§ã™ã€‚
ã“ã¡ã‚‰ã¯ [fzf_live()](#fzf_live()) ã®ç« ã§èª¬æ˜ã—ã¾ã™ã€‚

```
fzf_exec({contents} [, {opts}])
```

`{contents}` ã¯ fzf ã«æ¸¡ã•ã‚Œã‚‹å€™è£œã‚’è¡¨ç¾ã—ã¾ã™ã€‚
é…åˆ—ã€é–¢æ•°ã€æ–‡å­—åˆ—ã®3ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚ã‚Šã¾ã™ã®ã§ã€é †ã«èª¬æ˜ã—ã¾ã—ã‚‡ã†ã€‚
ã¾ãŸ `{opts}` ã§å®Ÿè¡Œå˜ä½æ¯ã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã§ãã¾ã™ã€‚

### `{contents}` ã¨ã—ã¦é…åˆ—ã‚’ä½¿ã†

æ–‡å­—åˆ—ã®é…åˆ—ã‚’ãã®ã¾ã¾æ¸¡ã™ã€æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªä¾‹ã§ã™ã€‚
ã“ã‚Œã¯ shell ã§ `echo "line1\nline2" | fzf` ã¨ã‚„ã‚‹ã®ã¨åŒã˜ã§ã™ã€‚

```lua
fzf_lua.fzf_exec({ "line1", "line2" })
```

### `{contents}` ã¨ã—ã¦é–¢æ•°ã‚’ä½¿ã†

é–¢æ•°ã‚’ä½¿ã†ã“ã¨ã§ã€ã‚‚ã£ã¨è¤‡é›‘ãªã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ã“ã®é–¢æ•°ã§ã¯ã€å¼•æ•°ã¨ã—ã¦ä¸ãˆã‚‰ã‚Œã‚‹ callback é–¢æ•°ã«1ã¤ãšã¤ entry ã‚’æ¸¡ã—ã¾ã™ã€‚
æœ€å¾Œã« nil (å¼•æ•°ç„¡ã—) ã§å‘¼ã³å‡ºã™ã“ã¨ã§ã€entry ã®åé›†ãŒçµ‚äº†ã—ãŸã“ã¨ã‚’é€šçŸ¥ã§ãã¾ã™ã€‚

```lua
fzf_lua.fzf_exec(function(fzf_cb)
  for i = 1, 10 do
    fzf_cb(i)
  end
  fzf_cb() -- EOF
end)
```

ã“ã®ä¾‹ã ã‘ã§ã¯é…åˆ—ã¨ã‚ã¾ã‚Šå¤‰ã‚ã‚‰ãªã„ã‚ˆã†ã«è¦‹ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚
é–¢æ•°ã‚’ä½¿ã†å¼·åŠ›ãªãƒ¡ãƒªãƒƒãƒˆã¨ã—ã¦ã€éåŒæœŸåŒ–ã‚’ç°¡å˜ã«è¡Œãˆã‚‹ã“ã¨ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ã€‚

entry ã®åé›†ã«æ™‚é–“ãŒã‹ã‹ã‚‹å ´åˆã€ä¸Šè¨˜ã®2ã¤ã®ã‚ˆã†ãªç´ ç›´ãªåŒæœŸå‡¦ç†ã§ã¯èµ·å‹•ãŒé…ããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚
ãã®é–“æœ¬ä½“ã®æ“ä½œã‚‚ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã€ä½•ã‚‚ã§ããªããªã‚‹ã®ã¯å¬‰ã—ããªã„ã§ã™ã­ã€‚
ã“ã‚Œã‚’é¿ã‘ã‚‹ãŸã‚ã€`coroutine` ã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

```lua
fzf_lua.fzf_exec(function(fzf_cb)
  coroutine.wrap(function()
    for i = 1, 10^9+7 do
      fzf_cb(i, function() coroutine.resume(co) end)
      coroutine.yield()
    end
    fzf_cb() -- EOF
  end)() -- ã“ã“ã® () å¿˜ã‚ŒãŒã¡ãªã®ã§æ³¨æ„
end)
```

`fzf_cb()` ã®ç¬¬äºŒå¼•æ•°ã«æ›¸ã„ãŸ `coroutine.resume` ã¯ã€entry ãŒ fzf ã®æ¨™æº–å…¥åŠ›ã«æ›¸ãè¾¼ã¾ã‚ŒãŸå¾Œã«å‘¼ã°ã‚Œã¾ã™ã€‚
ã¤ã¾ã‚Šå‡¦ç†é †ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

1. `fzf_cb` ãŒå‘¼ã°ã‚Œã‚‹ãŒã€åˆ¶å¾¡ã¯ã¾ã ã“ã¡ã‚‰ãŒæ¡ã£ãŸã¾ã¾ã€‚æ¬¡ã®è¡Œã¸
2. `coroutine.yield` ã§åˆ¶å¾¡ã‚’æ‰‹æ”¾ã™ã€‚
3. fzf ã®æ¨™æº–å…¥åŠ›ã« entry ã‚’æ›¸ãè¾¼ã‚€ã€‚
4. `coroutine.resume` ãŒå‘¼ã°ã‚Œã€åˆ¶å¾¡ãŒæˆ»ã£ã¦ãã‚‹ã€‚ã¾ãŸæ¬¡ã®ãƒ«ãƒ¼ãƒ—ã¸

æ³¨æ„ç‚¹ã‚’ä¸€ã¤è¿°ã¹ã¦ãŠãã¾ã—ã‚‡ã†ã€‚
`coroutine.yield` ã‚’ä½¿ã†éƒ½åˆä¸Šã€ãƒ«ãƒ¼ãƒ—ã®ä¸­ã§ `vim.fn.*` ã‚„ `vim.api.*` ã¯ä½¿ãˆã¾ã›ã‚“ã€‚
ã“ã‚Œã‚’å›é¿ã™ã‚‹ã«ã¯ `vim.schedule` ã‚’ä½¿ã£ã¦ãã ã•ã„ã€‚

```lua
fzf_lua.fzf_exec(function(fzf_cb)
  coroutine.wrap(function()
    for _, buffer in ipairs(vim.api.nvim_list_bufs()) do
      vim.schedule(function()
        local name = vim.api.nvim_buf_get_name(buffer)
        if name == "" then
          name = "[No Name]"
        end
        fzf_cb(buffer .. ":" .. name, function() coroutine.resume(co) end)
      end)
      coroutine.yield()
    end
    fzf_cb() -- EOF
  end)()
end)
```

### `{contents}` ã¨ã—ã¦æ–‡å­—åˆ—ã‚’ä½¿ã†

æœ€å¾Œã«æ–‡å­—åˆ—ã§ã™ã€‚
ã“ã‚Œã¯ shell command ã¨ã—ã¦è§£é‡ˆã•ã‚Œã¾ã™ã€‚

```lua
-- ã“ã‚Œã¯ `ls | fzf` ã¨ç­‰ä¾¡ã§ã™
fzf_lua.fzf_exec("ls")
```

shell command ã®å ´åˆã¯ entry ã®ç´°ã‹ãªåˆ¶å¾¡ãŒé›£ã—ã„ãŸã‚ã€`opts.fn_transform` ã‚’ä½¿ã£ã¦ entry ã«å¤‰æ›å‡¦ç†ã‚’ã‹ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
`ls` ã®çµæœã« cwd ã‚’è¿½åŠ ã—ã€å…ƒã®å‡ºåŠ›éƒ¨åˆ†ã‚’ãƒã‚¼ãƒ³ã‚¿ã«è‰²ä»˜ã‘ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```lua
fzf_lua.fzf_exec("ls", {
  fn_transform = function(entry)
    return vim.uv.cwd() .. "/" .. fzf_lua.utils.ansi_codes.magenta(entry)
  end
})
```

## fzf_live()

live grep ãªã©ã®ä¸€éƒ¨ã®æ©Ÿèƒ½ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«ã¯ã€`fzf_live` ã‚’ä½¿ã„ã¾ã—ã‚‡ã†ã€‚
query (ç¾åœ¨ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¸ã®å…¥åŠ›) ã«å¿œã˜ã¦ã€å‹•çš„ã«å€™è£œã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```
fzf_live({contents} [, {opts}])
```

ã“ã® `{contents}` ã¯ query (string) ã‚’å—ã‘å–ã‚‹é–¢æ•°ã§ã€æˆ»ã‚Šå€¤ã¯ `fzf_exec` ã«ãŠã‘ã‚‹ `{contents}` ã§ã™ã€‚
ã¤ã¾ã‚Šé…åˆ—ã€é–¢æ•°ã€æ–‡å­—åˆ—ã§ã™ã­ã€‚
çœç•¥ã—ã¦ã€é…åˆ—ã®å ´åˆã®ä¾‹ã ã‘ã‚’è¼‰ã›ã¾ã™ã€‚

```lua
fzf_lua.fzf_live(function(query)
  local lines = {}
  local n = tonumber(query)
  if n then
    for i = 1, n do
      table.insert(lines, i)
    end
  else
    table.insert(lines, "Invalid number: " .. query)
  end
  return lines
end)
```

å®Ÿã¯ã“ã® APIã€çµã‚Šè¾¼ã¿å‡¦ç†ã®å·®ã—æ›¿ãˆã¨ã¿ãªã™ã“ã¨ãŒã§ãã¾ã™ã€‚
ã¤ã¾ã‚Šã€ã“ã‚Œã‚’ä½¿ã†ã¨ migemo é€£æºã‚’å®Ÿè£…ã§ããŸã‚Šã—ã¾ã™ (`rennkei` ãŒ `é€£æº` ã«ãƒ’ãƒƒãƒˆã™ã‚‹ã‚ˆã†ã«ã§ãã‚‹)ã€‚

## action ã‚’ç™»éŒ²ã™ã‚‹

`opts.actions` ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€ä»»æ„ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç™»éŒ²ã§ãã¾ã™ã€‚
å¤šãã®ãƒ—ãƒªã‚»ãƒƒãƒˆãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€åŸºæœ¬çš„ãªæ“ä½œã§ã‚ã‚Œã°ä½œã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

```lua
fzf_lua.fzf_exec("ls", {
  actions = {
    ["default"] = fzf_lua.actions.file_edit,
    ["ctrl-x"] = fzf_lua.actions.file_split,
    ["ctrl-v"] = fzf_lua.actions.file_vsplit,
  },
})
```

1ã‹ã‚‰ä½œã‚‹å ´åˆã¯ã“ã“[^2]ã‚’å‚è€ƒã«ã—ã¾ã—ã‚‡ã†ã€‚

å„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®å®Ÿä½“ã¯ã€é–¢æ•° `fun(selected: string[], opts?: table)` ã§ã™ã€‚
`selected` ã«ã¯ã€ç¾åœ¨é¸æŠã•ã‚Œã¦ã„ã‚‹ entry ã®ä¸€è¦§ãŒå…¥ã£ã¦ã„ã¾ã™ã€‚
ã“ã“ã•ãˆç†è§£ã—ãŠã‘ã°ã€æ—¢å­˜ã®ã‚‚ã®ã‚’ wrap ã—ã¦ä½¿ã†ã“ã¨ã‚‚ã§ãã¾ã™ã‚ˆã€‚

## previewer ã‚’ä»˜ã‘ã‚‹

`opts.previewer` ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ä»˜ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

1ã‹ã‚‰ä½œã‚‹ã®ã¯å¤§å¤‰ã§ã™ãŒã€ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’ç¶™æ‰¿ã—ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚[^3]
å…·ä½“ä¾‹ã¯ [zenn-cli é€£æº](#zenn-cli-é€£æº) ã‚’ã©ã†ãã€‚

# ä½¿ç”¨ä¾‹

## vim-mr é€£æº

[vim-mr](https://github.com/lambdalisue/vim-mr) ã¨ã„ã†ã€æœ€è¿‘ä½¿ã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®å±¥æ­´ã‚’ç®¡ç†ã—ã¦ãã‚Œã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œã‚’ fzf-lua ã§æ¤œç´¢ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

:::details lua/rc/plugins/fzf_lua/mr.lua
```lua
local fzf_lua = require("fzf-lua")

---@param mode? "mru"|"mrr"|"mrw"
local function mru(mode)
  mode = mode or "mru"
  fzf_lua.fzf_exec(function(cb)
    for _, path in ipairs(vim.fn[("mr#%s#list"):format(mode)]()) do
      local entry = fzf_lua.make_entry.file(path, { file_icons = true, color_icons = true })
      cb(entry)
    end
    cb()
  end, {
    prompt = ("%s> "):format(mode:upper()),
    actions = {
      ["default"] = fzf_lua.actions.file_edit,
      ["ctrl-x"] = fzf_lua.actions.file_split,
      ["ctrl-v"] = fzf_lua.actions.file_vsplit,
    },
    previewer = "builtin",
    fzf_opts = {
      ["--no-sort"] = "",
    },
  })
end

return mru
```
:::

## zenn-cli é€£æº

zenn-cli ã‚’ä½¿ã£ã¦è¨˜äº‹ã‚’ç®¡ç†ã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€ãƒ•ã‚¡ã‚¤ãƒ«åã¯ `318bba82c53a1d.md` ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã§æ¤œç´¢ã™ã‚‹ã®ã¯ç„¡ç†ãªã®ã§ã€ã‚¿ã‚¤ãƒˆãƒ«ã‚’æ—¥æœ¬èªã§æ¤œç´¢ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚
[vim-kensaku](https://github.com/lambdalisue/vim-kensaku) ã¨ã„ã†ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚

ã¾ã‚ã¾ã‚ç™ºå±•çš„ãªä¾‹ãªã®ã§ã€ã¡ã‚‡ã£ã¨é›£ã—ã„ã‹ã‚‚ã€‚

:::details lua/rc/plugins/fzf_lua/zenn_dev.lua
```lua
local fzf_lua = require("fzf-lua")

local root = vim.fs.normalize("~/zenn/articles")
local entry2path = {}
local entry_cache = {}

local function read_sync(path)
  local fd = assert(vim.uv.fs_open(path, "r", 292)) -- 0444
  local stat = assert(vim.uv.fs_fstat(fd))
  local buffer = assert(vim.uv.fs_read(fd, stat.size, 0))
  assert(vim.uv.fs_close(fd))
  return buffer
end

local function path2entry(path)
  local content = vim.trim(read_sync(path))
  local title, emoji = "", ""
  local sep_counter = 0
  for line in vim.gsplit(content, "\n") do
    if line:find("^---+$") then
      sep_counter = sep_counter + 1
    elseif line:find("^title%s*:") then
      title = line:gsub("^title%s*:%s*", ""):match('^"(.*)"$')
    elseif line:find("^emoji%s*:") then
      emoji = line:gsub("^emoji%s*:%s*", ""):match('^"(.*)"$')
    end
    if sep_counter >= 2 then
      break
    end
  end
  local padding = 4 - vim.api.nvim_strwidth(emoji)
  local entry = emoji .. (" "):rep(padding) .. title
  return entry
end

local function get_entries()
  if #entry_cache > 0 then
    return entry_cache
  end
  for name, _ in vim.fs.dir(root) do
    if name:find("%.md$") then
      local path = vim.fs.joinpath(root, name)
      local entry = path2entry(path)
      entry2path[entry] = path
      if #entry == 4 then
        -- No title
        table.insert(entry_cache, 1, entry)
      else
        table.insert(entry_cache, entry)
      end
    end
  end
  return entry_cache
end

local builtin = require("fzf-lua.previewer.builtin")
local previewer = builtin.buffer_or_file:extend()

function previewer:new(o, opts, fzf_win)
  previewer.super.new(self, o, opts, fzf_win)
  setmetatable(self, previewer)
  return self
end

function previewer:parse_entry(entry_str)
  local path = entry2path[entry_str]
  return { path = path }
end

local function wrap_action(action)
  return function(selected, opts)
    for i, v in ipairs(selected) do
      selected[i] = entry2path[v]
    end
    action(selected, opts)
  end
end

local function zenn(mode)
  fzf_lua.fzf_live(function(q)
    -- è¨˜äº‹ã‚’æ–°è¦ã«ä½œã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã®ã§ã€ã‚¯ã‚¨ãƒªãŒç©ºã®ã¨ãã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒªã‚»ãƒƒãƒˆ
    if q == "" then
      entry_cache = {}
    end
    local regex = vim.regex(vim.fn["kensaku#query"](q))
    local entries = get_entries()
    local filtered = {}
    for _, entry in ipairs(entries) do
      if regex:match_str(entry) then
        table.insert(filtered, entry)
      end
    end
    return filtered
  end, {
    prompt = ("Zenn %s> "):format(mode),
    exec_empty_query = true,
    actions = {
      ["default"] = wrap_action(fzf_lua.actions.file_edit),
      ["ctrl-x"] = wrap_action(fzf_lua.actions.file_split),
      ["ctrl-v"] = wrap_action(fzf_lua.actions.file_vsplit),
    },
    previewer = previewer,
  })
end

return zenn
```
:::

# ãŠã‚ã‚Šã«

çµæ§‹ç«¯æŠ˜ã£ã¦ã¾ã™ã€‚
è©³ç´°ã‚’çŸ¥ã‚ŠãŸã„æ–¹ã¯ Wiki ã®åŸæ–‡[^1]ã¨ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§ãã ã•ã„ã€‚

FF ã¯å¼„ã‚Œã¦ãªã‚“ã¼ã§ã™ã‹ã‚‰ã­ã€‚
Let's have fun!

[^1]: https://github.com/ibhagwan/fzf-lua/wiki/Advanced
[^2]: https://github.com/ibhagwan/fzf-lua/blob/main/lua/fzf-lua/actions.lua
[^3]: https://github.com/ibhagwan/fzf-lua/wiki/Advanced#neovim-builtin-preview
